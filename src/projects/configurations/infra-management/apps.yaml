spec:
  project: infra-management

apps:
  argo-cd:
    automated: true
    chartName: argo-cd
    extraLabels:
      web-gui: "true"
    installType: helm
    repoURL: https://argoproj.github.io/argo-helm
    syncWave: "0"
    targetRevision: 8.1.2

  cert-manager:
    automated: true
    chartName: cert-manager
    installType: helm
    repoURL: https://charts.jetstack.io
    syncWave: "10"
    targetRevision: v1.18.2

  cilium:
    automated: true
    chartName: cilium
    installType: helm
    repoURL: https://helm.cilium.io/
    syncWave: "-10"
    targetRevision: 1.17.5

  external-secrets:
    automated: true
    chartName: external-secrets
    installType: helm
    repoURL: https://charts.external-secrets.io
    syncWave: "10"
    targetRevision: 0.18.2

  k3s-upgrader:
    automated: true
    installType: localKustomize
    syncWave: "10"

  longhorn:
    automated: true
    chartName: longhorn
    ignoreDifferences:
      - group: 'apiextensions.k8s.io'
        kind: CustomResourceDefinition
        jqPathExpressions:
          - .spec.preserveUnknownFields
    installType: helm
    repoURL: https://charts.longhorn.io
    syncWave: "0"
    targetRevision: 1.9.0

  metallb:
    automated: true
    chartName: metallb
    installType: helm
    repoURL: https://metallb.github.io/metallb
    syncWave: "0"
    targetRevision: 0.15.2

  nfs-provisioner:
    automated: true
    chartName: nfs-subdir-external-provisioner
    extraLabels:
      web-gui: "true"
    repoURL: https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner
    installType: helm
    syncWave: "10"
    targetRevision: 4.0.18

  nvidia-operator:
    automated: true
    chartName: gpu-operator
    installType: helm
    repoURL: https://helm.ngc.nvidia.com/nvidia
    syncWave: "10"
    targetRevision: v25.3.1

  openbao:
    automated: true
    chartName: openbao
    extraLabels:
      web-gui: "true"
    ignoreDifferences:
      - group: admissionregistration.k8s.io
        kind: MutatingWebhookConfiguration
        jsonPointers:
          - /webhooks/0/clientConfig/caBundle
    repoURL: https://openbao.github.io/openbao-helm
    installType: helm
    syncWave: "20"
    targetRevision: 0.13.2
  
  traefik:
    automated: true
    chartName: traefik
    installType: helm
    repoURL: https://traefik.github.io/charts
    syncWave: "10"
    targetRevision: 36.3.0
