spec:
  project: dev-management

apps:
  github-scale-set:
    # renovate bot sequenced fields
    chartName: gha-runner-scale-set
    installType: oci
    repoURL: ghcr.io/actions/actions-runner-controller-charts
    targetRevision: 0.10.0
    # chart template required fields
    automated: false
    namespace: github-runner
    syncWave: "30"

  github-scale-set-controller:
    automated: false
    # renovate bot sequenced fields
    chartName: gha-runner-scale-set-controller
    installType: oci
    repoURL: ghcr.io/actions/actions-runner-controller-charts
    targetRevision: 0.10.0
    # chart template required fields
    extraSyncOptions:
      - ServerSideApply=true
    ignoreDifferences:
      - group: 'apiextensions.k8s.io'
        kind: CustomResourceDefinition
        jqPathExpressions:
          - .spec.preserveUnknownFields
    namespace: github-runner
    syncWave: "30"

  gitlab-runner:
    automated: true
    chartName: gitlab-runner
    installType: helm
    repoURL: https://charts.gitlab.io
    syncWave: "20"
    targetRevision: 0.78.1

  harbor:
    automated: true
    chartName: harbor
    extraLabels:
      web-gui: "true"
    ignoreDifferences:
      - group: ''
        kind: Secret
        name: harbor-core
        jsonPointers:
          - /data/CSRF_KEY
          - /data/secret
          - /data/tls.crt
          - /data/tls.key
      - group: ''
        kind: Secret
        name: harbor-database
        jsonPointers:
          - /data/POSTGRES_PASSWORD
      - group: ''
        kind: Secret
        name: harbor-jobservice
        jsonPointers:
          - /data/JOBSERVICE_SECRET
      - group: ''
        kind: Secret
        name: harbor-registry
        jsonPointers:
          - /data/REGISTRY_HTTP_SECRET
      - group: ''
        kind: Secret
        name: harbor-registry-htpasswd
        jsonPointers:
          - /data/REGISTRY_HTPASSWD
      - group: apps
        kind: Deployment
        jqPathExpressions:
          - .spec.template.metadata.annotations."checksum/secret"
          - .spec.template.metadata.annotations."checksum/secret-core"
          - .spec.template.metadata.annotations."checksum/secret-jobservice"
    installType: helm
    repoURL: https://helm.goharbor.io
    syncWave: "30"
    targetRevision: 1.17.1

  jupyterhub:
    automated: false
    chartName: jupyterhub
    extraLabels:
      web-gui: "true"
    installType: helm
    repoURL: https://jupyterhub.github.io/helm-chart
    syncWave: "30"
    targetRevision: 4.2.0

  kafka:
    automated: false
    chartName: kafka
    ignoreDifferences:
      - group: ''
        kind: Secret
        name: kafka-kraft-cluster-id
        jsonPointers:
          - /data/kraft-cluster-id
      - group: ''
        kind: Secret
        name: kafka-user-passwords
        jsonPointers:
          - /data/kraft-cluster-id
          - /data/client-passwords
          - /data/controller-password
          - /data/inter-broker-password
          - /data/system-user-password
      - group: apps
        kind: StatefulSet
        jqPathExpressions:
          - .spec.template.metadata.annotations."checksum/passwords-secret"
    installType: oci
    path: kafka
    repoURL: registry-1.docker.io/bitnamicharts
    syncWave: "30"
    targetRevision: 31.0.0
    
  n8n:
    automated: false
    chartName: n8n
    extraLabels:
      web-gui: "true"
    installType: oci
    path: n8n
    repoURL: 8gears.container-registry.com/library
    syncWave: "30"
    targetRevision: 1.0.0

  ollama:
    automated: false
    chartName: ollama
    installType: helm
    repoURL: https://otwld.github.io/ollama-helm/
    syncWave: "30"
    targetRevision: 1.23.0

  rabbitmq:
    automated: false
    chartName: rabbitmq
    extraLabels:
      web-gui: "true"
    installType: oci
    path: rabbitmq
    repoURL: registry-1.docker.io/bitnamicharts
    syncWave: "30"
    targetRevision: 16.0.3