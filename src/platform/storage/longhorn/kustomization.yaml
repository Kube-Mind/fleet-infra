apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- namespace.yaml

helmCharts:
- name: longhorn
  namespace: longhorn
  releaseName: longhorn
  repo: https://charts.longhorn.io
  valuesFile: values.yaml
  version: 1.9.0
  includeCRDs: true

patches:
  - target:
      group: batch
      version: v1
      kind: Job
      name: longhorn-uninstall
    path: patches/remove-uninstall-job.yaml
  - target:
      group: batch
      version: v1
      kind: Job
      name: longhorn-post-upgrade
    path: patches/remove-postupgrade-job.yaml